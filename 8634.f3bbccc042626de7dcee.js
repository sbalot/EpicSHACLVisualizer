(self.webpackChunkviewer=self.webpackChunkviewer||[]).push([[8634],{76083:function(t,e,r){const n=r(99360),a=r(58335),o=r(13457),s=r(34546),i=r(76648),u=r(44182),c=r(15296);t.exports=function t(e){if(!e)return null;if("BlankNode"===e.termType)return n(e);if("DefaultGraph"===e.termType)return o();if("Literal"===e.termType)return s(e);if("NamedNode"===e.termType)return i(e);if("Quad"===e.termType||e.subject&&e.predicate&&e.object&&e.graph)return u(e,t);if("Variable"===e.termType)return c(e);if(e[Symbol.iterator])return a(e,t);throw new Error(`unknown termType ${e.termType}`)}},99360:function(t){t.exports=function(t){return"_:"+t.value}},58335:function(t){t.exports=function(t,e){return[...t].map((t=>e(t))).join("\n")+"\n"}},13457:function(t){t.exports=function(){return""}},34546:function(t,e,r){const n=r(76648),a=/["\\\\\n\r]/,o=/["\\\\\n\r]/g,s={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r"};function i(t){return s[t]}t.exports=function(t){const e=(r=t.value,a.test(r)?r.replace(o,i):r);var r;return"http://www.w3.org/2001/XMLSchema#string"===t.datatype.value?'"'+e+'"':"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"===t.datatype.value?'"'+e+'"@'+t.language:'"'+e+'"^^'+n(t.datatype)}},76648:function(t){t.exports=function(t){return"<"+t.value+">"}},44182:function(t){t.exports=function(t,e){const r=e(t.subject),n=e(t.predicate),a=e(t.object),o=e(t.graph);return`${r} ${n} ${a} ${o?o+" ":""}.`}},15296:function(t){t.exports=function(t){return"?"+t.value}},85717:function(t,e,r){const n=r(62625);t.exports=function({dataset:t,graph:e,term:r,value:a,factory:o,_context:s}){return new n({dataset:t,graph:e,term:r,value:a,factory:o,_context:s})}},62625:function(t,e,r){const n=r(2762),a=r(36598),o=r(14277),s=r(1537),i=r(27424);class u{constructor({dataset:t,graph:e,term:r,value:s,factory:u=n,_context:c}){if(this.factory=u,this.namespace=a(u),c)return void(this._context=c);const h=r&&o(r)||s&&o(s)||[null];this._context=h.map((r=>new i({dataset:t,graph:e,value:r,factory:this.factory,namespace:this.namespace})))}get term(){const t=this.terms;if(1===t.length)return t[0]}get terms(){return this._context.map((t=>t.term)).filter(Boolean)}get value(){const t=this.term;return t&&t.value}get values(){return this.terms.map((t=>t.value))}get dataset(){const t=this.datasets;if(1===t.length)return t[0]}get datasets(){return this._context.map((t=>t.dataset)).filter(Boolean)}any(){return u.fromContext(this._context.map((t=>t.clone({}))))}isList(){return!(!this.term||!this.term.equals(this.namespace.nil)&&!this.out(this.namespace.first).term)}list(){if(this.terms.length>1)throw new Error("iterator over multiple terms is not supported");if(this.term){if("NamedNode"!==this.term.termType&&"BlankNode"!==this.term.termType)return null;if(!this.term.equals(this.namespace.nil)&&!this.out(this.namespace.first).term)return null}let t=this;return{[Symbol.iterator]:()=>({next:()=>{if(!t.term||t.term.equals(this.namespace.nil))return{done:!0};const e=t.out(this.namespace.first);if(e.terms.length>1)throw new Error(`Invalid list: multiple values for rdf:first on ${t.value}`);const r=t.out(this.namespace.rest);if(r.terms.length>1)throw new Error(`Invalid list: multiple values for rdf:rest on ${t.value}`);return t=r,{done:!1,value:e}}})}}toArray(){return this._context.map((t=>u.fromContext(t))).filter((t=>t.terms.some(Boolean)))}filter(t){const e=this._context.map((t=>u.fromContext(t)));return u.fromContext(this._context.filter(((r,n)=>t(u.fromContext(r),n,e))))}forEach(t){return this.toArray().forEach(t),this}map(t){return this.toArray().map(t)}toString(){return this.values.join()}node(t,{type:e,datatype:r,language:n}={}){const a=(t=this._toTermArray(t,e,r||n)||[null]).reduce(((t,e)=>t.concat(this._context.reduce(((t,r)=>t.concat([r.clone({value:e})])),[]))),[]);return u.fromContext(a)}blankNode(t){return this.node(t,{type:"BlankNode"})}literal(t,e){return this.node(t,{type:"Literal",datatype:e})}namedNode(t){return this.node(t,{type:"NamedNode"})}in(t){t=this._toTermArray(t);const e=this._context.reduce(((e,r)=>e.concat(r.in(t))),[]);return u.fromContext(e)}out(t,e={}){t=this._toTermArray(t);const r=this._context.reduce(((r,n)=>r.concat(n.out(t,e))),[]);return u.fromContext(r)}has(t,e){t=this._toTermArray(t),e=this._toTermArray(e);const r=this._context.reduce(((r,n)=>r.concat(n.has(t,e))),[]);return u.fromContext(r)}addIn(t,e,r){if(!t)throw new Error("predicate parameter is required");"function"==typeof e&&(r=e,e=null),t=this._toTermArray(t),e=this._toTermArray(e)||[this.factory.blankNode()];const n=this._context.map((r=>r.addIn(t,e)));return r&&u.fromContext(n).forEach(r),this}addOut(t,e,r){if(!t)throw new Error("predicate parameter is required");"function"==typeof e&&(r=e,e=null),t=this._toTermArray(t),e=this._toTermArray(e)||[this.factory.blankNode()];const n=this._context.map((r=>r.addOut(t,e)));return r&&u.fromContext(n).forEach(r),this}addList(t,e){if(!t||!e)throw new Error("predicate and items parameter is required");return t=this._toTermArray(t),e=this._toTermArray(e),this._context.forEach((r=>r.addList(t,e))),this}deleteIn(t,e){return t=this._toTermArray(t),e=this._toTermArray(e),this._context.forEach((r=>r.deleteIn(t,e))),this}deleteOut(t,e){return t=this._toTermArray(t),e=this._toTermArray(e),this._context.forEach((r=>r.deleteOut(t,e))),this}deleteList(t){if(!t)throw new Error("predicate parameter is required");return t=this._toTermArray(t),this._context.forEach((e=>e.deleteList(t))),this}_toTermArray(t,e,r){return s(t,e,r,this.factory)}static fromContext(t){return new u({_context:o(t),factory:t.factory})}}t.exports=u},27424:function(t,e,r){const n=r(36449),a=r(14277),{filterTaggedLiterals:o}=r(10791);class s{constructor({dataset:t,graph:e,value:r,factory:a,namespace:o}){this.dataset=t,this.graph=e,this.factory=a,this.namespace=o,this.term=n(r,void 0,void 0,a)}clone({dataset:t=this.dataset,graph:e=this.graph,value:r,factory:n=this.factory,namespace:a=this.namespace}){return new s({dataset:t,graph:e,value:r,factory:n,namespace:a})}has(t,e){return this.matchProperty(a(this.term),t,e,a(this.graph),"subject").map((t=>this.clone({value:t})))}in(t){return this.matchProperty(null,t,a(this.term),a(this.graph),"subject").map((t=>this.clone({value:t})))}out(t,{language:e}={}){let r=this.matchProperty(a(this.term),t,null,a(this.graph),"object");return void 0!==e&&(r=o(r,{language:e})),r.map((t=>this.clone({value:t})))}addIn(t,e){const r=[];return this.term&&e.forEach((e=>{t.forEach((t=>{this.dataset.add(this.factory.quad(e,t,this.term,this.graph))})),r.push(this.clone({value:e}))})),r}addOut(t,e){const r=[];return this.term&&e.forEach((e=>{t.forEach((t=>{this.dataset.add(this.factory.quad(this.term,t,e,this.graph))})),r.push(this.clone({value:e}))})),r}addList(t,e){this.term&&t.forEach((t=>{const r=e.map((()=>this.factory.blankNode()));this.dataset.add(this.factory.quad(this.term,t,r[0]||this.namespace.nil,this.graph));for(let t=0;t<r.length;t++)this.dataset.add(this.factory.quad(r[t],this.namespace.first,e[t],this.graph)),this.dataset.add(this.factory.quad(r[t],this.namespace.rest,r[t+1]||this.namespace.nil,this.graph))}))}deleteIn(t,e){this.deleteMatch(e,t,a(this.term),a(this.graph))}deleteOut(t,e){this.deleteMatch(a(this.term),t,e,a(this.graph))}deleteList(t){t.forEach((t=>{for(const e of this.dataset.match(this.term,t))this.deleteItems(e)}))}deleteItems(t){let e=[t];for(;!e[e.length-1].object.equals(this.namespace.nil);){const t=e[e.length-1].object;e=e.concat([...this.dataset.match(t)])}e.forEach((t=>{this.dataset.delete(t)}))}match(t,e,r,n){if(!(t||e||r||n))return[...this.dataset];t=t||[null],e=e||[null],r=r||[null],n=n||[null];const a=[];for(const o of n)for(const n of t)for(const t of e)for(const e of r)for(const r of this.dataset.match(n,t,e,o))a.push(r);return a}matchProperty(t,e,r,n,a){return this.match(t,e,r,n).map((t=>t[a]))}deleteMatch(t,e,r,n){this.match(t,e,r,n).forEach((t=>{this.dataset.delete(t)}))}}t.exports=s},62394:function(t,e,r){const n=r(2762),a=r(36598),{xsd:o}=a(n);function s(t,e=n){return"boolean"!=typeof t?null:e.literal(t.toString(),o("boolean"))}function i(t,e=n){return"number"!=typeof t?null:Number.isInteger(t)?e.literal(t.toString(10),o("integer")):e.literal(t.toString(10),o("double"))}function u(t,e=n){return"string"!=typeof t?null:e.literal(t)}t.exports={booleanToLiteral:s,numberToLiteral:i,stringToLiteral:u,toLiteral:function(t,e=n){return s(t,e)||i(t,e)||u(t,e)}}},10791:function(t,e,r){const n=r(2762),a=r(36598)(n);function o(t,e){const r="Literal"!==e.termType,n=a.langString.equals(e.datatype)||a.xsd.string.equals(e.datatype);if(r||!n)return t;const o=e.language.toLowerCase();return t.has(o)?t.get(o).push(e):t.set(o,[e]),t}t.exports={filterTaggedLiterals:function(t,{language:e}){const r="string"==typeof e?[e]:e,n=function(t){const e=t.reduce(o,new Map),r=[...e.entries()];return t=>{const n=t.toLowerCase();if("*"===n)return r[0]&&r[0][1];const a=e.get(n);if(a)return a;const o=r.find((([t])=>t.startsWith(n)));return o&&o[1]}}(t);return r.map(n).find(Boolean)||[]}}},36598:function(t,e,r){const n=r(91353);t.exports=t=>{const e=n("http://www.w3.org/2001/XMLSchema#",{factory:t}),r=n("http://www.w3.org/1999/02/22-rdf-syntax-ns#",{factory:t});return{first:r.first,nil:r.nil,rest:r.rest,langString:r.langString,xsd:e}}},36449:function(t,e,r){const{toLiteral:n}=r(62394);function a(t,e){if("string"!=typeof t)throw new Error("Named node must be an IRI string");return e.namedNode(t)}t.exports=function(t,e="Literal",r,o){if(t&&"object"==typeof t&&t.termType)return t;if(t&&"URL"===t.constructor.name)return a(t.toString(),o);if("BlankNode"===e)return function(t,e){if(t&&"string"!=typeof t)throw new Error("Blank node identifier must be a string");return e.blankNode(t)}(t,o);if(null!=t){if("Literal"===e)return function(t,e,r){if("string"==typeof t)return(e=e&&(e.value||e.toString()))&&-1!==e.indexOf(":")&&(e=r.namedNode(e)),r.literal(t.toString(),e);const a=n(t,r);if(!a)throw new Error("The value cannot be converted to a literal node");return a}(t,r,o);if("NamedNode"===e)return a(t,o);throw new Error("unknown type")}}},14277:function(t){t.exports=function(t,e){return null==t?e:Array.isArray(t)?t:"string"!=typeof t&&t[Symbol.iterator]?[...t]:[t]}},1537:function(t,e,r){const n=r(36449),a=r(14277);t.exports=function(t,e,r,o){return null!=t||e?(a(t)||[void 0]).reduce(((t,a)=>"object"==typeof a&&a.terms?t.concat(a.terms):(t.push(n(a,e,r,o)),t)),[]):t}},2762:function(t,e,r){const n=r(49154);t.exports=n},76304:function(t){class e{constructor(t){this.value=t||"b"+ ++e.nextId}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value}}e.prototype.termType="BlankNode",e.nextId=0,t.exports=e},49154:function(t,e,r){const n=r(76304),a=r(90507),o=r(94497),s=r(29262),i=r(47611),u=r(74043),c=r(68223),h={namedNode:function(t){return new i(t)},blankNode:function(t){return new n(t)},literal:function(t,e){return"string"==typeof e?-1===e.indexOf(":")?new s(t,e):new s(t,null,h.namedNode(e)):new s(t,null,e)},variable:function(t){return new c(t)},defaultGraph:function(){return h.defaultGraphInstance},triple:function(t,e,r){return h.quad(t,e,r)},quad:function(t,e,r,n){return new u(t,e,r,n||h.defaultGraphInstance)},fromTerm:function(t){return o.call(h,t)},fromQuad:function(t){return o.call(h,t)},defaultGraphInstance:new a};t.exports=h},90507:function(t){class e{equals(t){return!!t&&t.termType===this.termType}}e.prototype.termType="DefaultGraph",e.prototype.value="",t.exports=e},29262:function(t,e,r){const n=r(47611);class a{constructor(t,e,r){this.value=t,this.datatype=a.stringDatatype,this.language="",e?(this.language=e,this.datatype=a.langStringDatatype):r&&(this.datatype=r)}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value&&t.language===this.language&&t.datatype.equals(this.datatype)}}a.prototype.termType="Literal",a.langStringDatatype=new n("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),a.stringDatatype=new n("http://www.w3.org/2001/XMLSchema#string"),t.exports=a},47611:function(t){class e{constructor(t){this.value=t}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value}}e.prototype.termType="NamedNode",t.exports=e},74043:function(t,e,r){const n=r(90507);class a{constructor(t,e,r,a){this.subject=t,this.predicate=e,this.object=r,this.graph=a||new n}equals(t){return!!t&&("Quad"===t.termType||!t.termType)&&t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}}a.prototype.termType="Quad",a.prototype.value="",t.exports=a},68223:function(t){class e{constructor(t){this.value=t}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value}}e.prototype.termType="Variable",t.exports=e},94497:function(t){t.exports=function(t){if(!t)return null;if("BlankNode"===t.termType)return this.blankNode(t.value);if("DefaultGraph"===t.termType)return this.defaultGraph();if("Literal"===t.termType)return this.literal(t.value,t.language||this.namedNode(t.datatype.value));if("NamedNode"===t.termType)return this.namedNode(t.value);if("Quad"===t.termType){const e=this.fromTerm(t.subject),r=this.fromTerm(t.predicate),n=this.fromTerm(t.object),a=this.fromTerm(t.graph);return this.quad(e,r,n,a)}if("Variable"===t.termType)return this.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}}}]);